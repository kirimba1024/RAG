- SG: –∞–≤—Ç–æ–ø—Ä–æ–≤–∏–∂–∏–Ω–∏–Ω–≥ (admin, repos, autoindex), src-cli –≤ –æ–±—Ä–∞–∑–µ, repos init –≤—Ä—É—á–Ω—É—é.
- .env: –¥–æ–±–∞–≤–ª–µ–Ω—ã SOURCEGRAPH_ADMIN_*, PROVISION_REPOS=1; .gitignore –ø–æ–∑–≤–æ–ª—è–µ—Ç .env.
- –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏: —Ä–∞–±–æ—Ç–∞–µ–º –∏–∑ repos/, –æ—Ç–∫–∞–∑ –æ—Ç knowledge/; REPOS_ROOT –≤–º–µ—Å—Ç–æ KNOWLEDGE_ROOT.
- Sandbox: –º–æ–Ω—Ç–∏—Ä—É–µ–º repos ‚Üí /app, –¥–æ–±–∞–≤–ª–µ–Ω git, –æ–±–Ω–æ–≤–ª–µ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è entrypoint.
- Sourcegraph tools: sg_search/sg_codeintel/sg_blob —É–ø—Ä–æ—â–µ–Ω—ã; –¥–æ–±–∞–≤–ª–µ–Ω—ã sg_get_file_content, sg_list_repos, sg_list_repo_files, sg_file_chunks (—Å–∏–º–≤–æ–ª—ã‚Üí—á–∞–Ω–∫–∏, fallback –ø–æ —Å—Ç—Ä–æ–∫–∞–º).
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è ES (build.py): –ø–æ–ª–Ω–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ SG+SCIP —á–∞–Ω–∫–∏; —Ö—ç—à –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É SG; –¥–∏—Ñ—Ñ –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ –ø—Ä–æ—Ç–∏–≤ actual –∏–∑ SG; —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ ES –ø–æ —É–¥–∞–ª—ë–Ω–Ω—ã–º; –º–∞—Å–∫–∏—Ä–æ–≤–∫–∞ —Å–µ–∫—Ä–µ—Ç–æ–≤ –∏ –ª–æ–≥ –Ω–∞—Ö–æ–¥–æ–∫; ignore –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ñ–∞–π–ª–∞.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ build.py: —É–¥–∞–ª–µ–Ω—ã —Ä–∏–¥–µ—Ä—ã/try-except/—Å—Ç–∞—Ä—ã–µ —Å–ø–ª–∏—Ç—Ç–µ—Ä—ã; —á–∏—Å—Ç—ã–π –ø–∞–π–ø–ª–∞–π–Ω SG‚ÜíES.
- GraphRAG: –≤—ã–Ω–µ—Å–µ–Ω –≤ graphrag_build.py; build.py –±–æ–ª—å—à–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫—É.
- tools.py: —É–ø—Ä–æ—â—ë–Ω, graphrag_query –±–µ–∑ –æ–±—ë—Ä—Ç–æ–∫, REPOS_ROOT –Ω–∞–ø—Ä—è–º—É—é.
- –ü—Ä–æ–º–ø—Ç—ã: chat_system_gather.txt ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω git –≤ —Å–ø–∏—Å–æ–∫ —É—Ç–∏–ª–∏—Ç.
- –ü—Ä–æ—á–µ–µ: —É–¥–∞–ª—ë–Ω PROP_GRAPH_INDEX; —É–¥–∞–ª–µ–Ω—ã —Å–∫–∞–Ω—ã –ø–æ –≤—Å–µ–º—É –¥–µ—Ä–µ–≤—É –∏–∑ check.py; mask.py —Ç–µ–ø–µ—Ä—å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç mask_secrets –¥–ª—è —Ç–µ–∫—Å—Ç–∞.
- –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ utils.py: –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –≤–µ—Å—å –∫–æ–¥ –∏–∑ ignore.py (is_ignored, IGNORE_SPEC) –∏ check.py (check_secrets_in_text, classify_secret_type, EMOJI_MAP) –≤ utils.py –¥–ª—è —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏–∏ —É—Ç–∏–ª–∏—Ç; —É–¥–∞–ª–µ–Ω—ã —Ñ–∞–π–ª—ã ignore.py –∏ check.py.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ utils.py: —É–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è REPOS_ROOT –∏ IGNORE_FILE (–ø—Ä–∞–≤–∏–ª–æ "–Ω–µ —Å—Ç—Ä–∞—Ö—É–π—Å—è"), —Å–æ–∑–¥–∞–Ω –≥–ª–æ–±–∞–ª—å–Ω—ã–π logger –¥–ª—è utils –≤–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π; –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ (—É–±—Ä–∞–Ω—ã –ª–æ–∫–∞–ª—å–Ω—ã–µ import hashlib –∏ from mask import).
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ .cursorrules: —É–¥–∞–ª–µ–Ω—ã —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –æ—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ (if not text –≤ clean_text), —É–¥–∞–ª–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ (# Sourcegraph), –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã —Ç–æ–ª—å–∫–æ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ.

- –í–µ—Ç–∫–∏ (rev) –≤ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏: –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ rev –≤ manifest ES –∏ metadata –∫–∞–∂–¥–æ–≥–æ —á–∞–Ω–∫–∞; —Ñ—É–Ω–∫—Ü–∏—è sg_get_repo_rev –ø–æ–ª—É—á–∞–µ—Ç —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É –∏–∑ Sourcegraph; –ª–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç hash –∏ rev - –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ rev –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –Ω–æ–≤—ã–µ —á–∞–Ω–∫–∏, —Å—Ç–∞—Ä—ã–µ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è; —Ö—Ä–∞–Ω—è—Ç—Å—è –≤—Å–µ –≤–µ—Ç–∫–∏ –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤–µ—Ç–∫–∞–º: retriever.py —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç —á–∞–Ω–∫–∏ –ø–æ metadata.rev –ø—Ä–∏ –ø–æ–∏—Å–∫–µ; –µ—Å–ª–∏ rev –Ω–µ —É–∫–∞–∑–∞–Ω, –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∏–∑ path_prefix –∏–ª–∏ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è; main_search —Ç—Ä–µ–±—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä rev –≤ —Å—Ö–µ–º–µ tools.
- –°–ø–∏—Å–æ–∫ –≤–µ—Ç–æ–∫ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ get_all_repos_branches –∏ get_all_repos_branches_formatted –≤ sourcegraph.py; —Å–ø–∏—Å–æ–∫ –≤–µ—Ç–æ–∫ –≤—Å–µ—Ö —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤ navigation –ø—Ä–æ–º–ø—Ç —á–µ—Ä–µ–∑ placeholder {BRANCHES_INFO}; –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç (–ø–µ—Ä–≤—ã–µ 10 –≤–µ—Ç–æ–∫, –æ—Å—Ç–∞–ª—å–Ω—ã–µ +N).
- –ë–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã: sg_get_file_content –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç None –¥–ª—è –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤; –¥–æ–±–∞–≤–ª–µ–Ω–∞ extract_binary_content —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π PDF/DOCX/PPTX/CSV/XLS/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —á–µ—Ä–µ–∑ OCR (pytesseract); –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã —Å–æ–∑–¥–∞—é—Ç –æ–¥–∏–Ω —á–∞–Ω–∫ —Å –æ–±—Ä–µ–∑–∫–æ–π –¥–æ 4096 —Å–∏–º–≤–æ–ª–æ–≤, kind="binary".
- –£–ø—Ä–æ—â–µ–Ω–∏—è: —É–±—Ä–∞–Ω–∞ –ª–∏—à–Ω—è—è –ø—Ä–æ–≤–µ—Ä–∫–∞ content –≤ calc_hash; —Ñ—É–Ω–∫—Ü–∏—è sg_list_repo_branches —É–¥–∞–ª–µ–Ω–∞, –ª–æ–≥–∏–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ get_all_repos_branches.
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ rev‚Üíbranch: –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è rev –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –≤ branch –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö (build.py, retriever.py, tools.py, chat.py, sourcegraph.py, manifest.json); branch —Ç–µ–ø–µ—Ä—å —è–≤–Ω–æ –æ–∑–Ω–∞—á–∞–µ—Ç –≤–µ—Ç–∫—É Git, –∞ –Ω–µ –∫–æ–º–º–∏—Ç SHA; —Ñ—É–Ω–∫—Ü–∏—è sg_get_repo_rev –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∞ –≤ sg_get_repo_branch –∏ —á–∏—Ç–∞–µ—Ç —Ç–µ–∫—É—â—É—é –≤–µ—Ç–∫—É –∏–∑ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ .git/HEAD.
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä branch: –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã (main_search, sg_search, sg_codeintel, sg_blob) —Ç—Ä–µ–±—É—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä branch; —É–¥–∞–ª–µ–Ω—ã –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è branch, path_prefix, top_n; TOOLS_SCHEMA –ø–æ–º–µ—á–∞–µ—Ç –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∫ required —Å –æ–ø–∏—Å–∞–Ω–∏—è–º–∏ –æ–∂–∏–¥–∞–µ–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π.
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤: –≤—Å—è –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —á–∞–Ω–∫–∏–Ω–≥–∞ –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–∞ –≤ sourcegraph.py; —Å–æ–∑–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è get_file_chunks –∫–æ—Ç–æ—Ä–∞—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω—ã–µ –∏ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã –µ–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω–æ; —Ñ—É–Ω–∫—Ü–∏—è get_file_hash –ø–æ–ª—É—á–∞–µ—Ç hash –Ω–∞–ø—Ä—è–º—É—é –∏–∑ Sourcegraph oid –±–µ–∑ fallback –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç.
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤: –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã —Ç–µ–ø–µ—Ä—å –¥—Ä–æ–±—è—Ç—Å—è –Ω–∞ —á–∞–Ω–∫–∏ —á–µ—Ä–µ–∑ custom_split –≤–º–µ—Å—Ç–æ –æ–¥–Ω–æ–≥–æ —á–∞–Ω–∫–∞ –Ω–∞ 4096 —Å–∏–º–≤–æ–ª–æ–≤; _extract_binary_content –∑–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–∞–π–ª—ã –∏–∑ Sourcegraph –Ω–∞–ø—Ä—è–º—É—é –≤ –ø–∞–º—è—Ç—å (BytesIO) –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞ –¥–∏—Å–∫; —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –∏ try-except –±–ª–æ–∫–∏ –∏–∑ _extract_binary_content —Å–æ–≥–ª–∞—Å–Ω–æ .cursorrules.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤: —É–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è symbol –∏ kind –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –≤ ES (–æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ doc_id, start_line, end_line, chunk_id, chunk_total, branch); —É–±—Ä–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è _create_chunk, –µ—ë –ª–æ–≥–∏–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ _split_by_symbols –∏ custom_split.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ build.py: —É–¥–∞–ª–µ–Ω–∞ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º–∞—è —Ñ—É–Ω–∫—Ü–∏—è delete_file; –ª–æ–≥–∏–∫–∞ process_files —É–ø—Ä–æ—â–µ–Ω–∞ —Å –ø—Ä—è–º—ã–º–∏ –≤—ã–∑–æ–≤–∞–º–∏ delete_chunks –∏ delete_manifest; –¥–æ–±–∞–≤–ª–µ–Ω—ã try-except –±–ª–æ–∫–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –≤—Å–µ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞; —Ñ—É–Ω–∫—Ü–∏—è process_file –≤—ã–¥–µ–ª–µ–Ω–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ sourcegraph.py: —É–±—Ä–∞–Ω—ã –≤—Å–µ –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ (.get() –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –ø—Ä—è–º–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ, —É–±—Ä–∞–Ω—ã min/max –¥–ª—è line numbers, —É–¥–∞–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ if not content); —É–¥–∞–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã doc_id –∏ line –∏–∑ sg_codeintel; doc_id –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ rel_path –≤ sg_blob; –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç rel_path –≤–º–µ—Å—Ç–æ —Ä–∞–∑–¥–µ–ª—å–Ω—ã—Ö repo/path –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ.

- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –º–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—É—é –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—é –æ–¥–Ω–æ–π –≤–µ—Ç–∫–∏: —É–¥–∞–ª—ë–Ω –∞—Ä–≥—É–º–µ–Ω—Ç branch –∏–∑ –≤—Å–µ—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ (main_search, sg_search, sg_codeintel, sg_blob, code_stats); Sourcegraph API –≤—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç HEAD; –º–∞–Ω–∏—Ñ–µ—Å—Ç ES —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ rel_path –∏ hash (–±–µ–∑ branch); —É–¥–∞–ª–µ–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏; —Å–∫—Ä–∏–ø—Ç sg_get_repo_branch –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –≤ utils.py, –∑–∞—Ç–µ–º —É–¥–∞–ª—ë–Ω (–∑–∞–º–µ–Ω—ë–Ω –Ω–∞ "HEAD").
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è sg_list_repo_files: –∑–∞–º–µ–Ω—ë–Ω N+1 GraphQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–∞ –µ–¥–∏–Ω—É—é –∫–æ–º–∞–Ω–¥—É git ls-tree -r HEAD –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ —Å OID –∑–∞ –æ–¥–∏–Ω –≤—ã–∑–æ–≤; –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è git_blob_oid –∏–∑ utils.py –≤–º–µ—Å—Ç–æ SHA256 –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è Sourcegraph.
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏: sg_search –∏ sg_codeintel –∏—Å–ø–æ–ª—å–∑—É—é—Ç path_prefix –≤–º–µ—Å—Ç–æ repo (–∫–∞–∫ –≤ main_search); —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ä—Å–∏–Ω–≥ path_prefix –≤ repo –∏ file —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è Sourcegraph API.
- –ü—Ä–æ–º–ø—Ç chat_system_gather.txt: —É–ø—Ä–æ—â—ë–Ω, —É–¥–∞–ª–µ–Ω—ã –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∫–æ–º–∞–Ω–¥, –∑–∞–º–µ–Ω–µ–Ω—ã –∫–æ–º–ø–∞–∫—Ç–Ω—ã–º —Å–ø–∏—Å–∫–æ–º —É—Ç–∏–ª–∏—Ç; –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è; –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ graphrag_query; —É–ª—É—á—à–µ–Ω –ø–æ—Ä—è–¥–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Docker Sourcegraph: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω URL –∑–∞–≥—Ä—É–∑–∫–∏ src-cli (https://sourcegraph.com/.api/src-cli/src_linux_amd64); –¥–æ–±–∞–≤–ª–µ–Ω platform: linux/amd64 –¥–ª—è M4; –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É (/server server –≤–º–µ—Å—Ç–æ /usr/local/bin/sourcegraph); –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—Ç –≤ compose (3080:7080 –≤–º–µ—Å—Ç–æ 3080:3080); entrypoint –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 127.0.0.1:7080 –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- –ü—Ä–æ–≤–∏–∂–∏–Ω–≥ Sourcegraph: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ GraphQL API –ø–µ—Ä–µ–¥ –ª–æ–≥–∏–Ω–æ–º; –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–∂–∏–¥–∞–Ω–∏—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å –ø–æ–≤—Ç–æ—Ä–Ω—ã–º–∏ –ø–æ–ø—ã—Ç–∫–∞–º–∏; –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ repos —á–µ—Ä–µ–∑ src repos add —Å file:// URL.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤: repos –∫–æ–ø–∏—Ä—É—é—Ç—Å—è –≤ –æ–±—Ä–∞–∑—ã –ø—Ä–∏ —Å–±–æ—Ä–∫–µ (sourcegraph –∏ sandbox), –∞ –Ω–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –∫–∞–∫ volume; —ç—Ç–æ –∏–∑–æ–ª–∏—Ä—É–µ—Ç Sourcegraph –æ—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª—É–∂–µ–±–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (.p4home, .tmp) –≤ –∏—Å—Ö–æ–¥–Ω–æ–π –ø–∞–ø–∫–µ repos; –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç build context –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ repos; –∏–∑–º–µ–Ω–µ–Ω–∏—è repos —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä–µ—Å–±–æ—Ä–∫–∏ –æ–±—Ä–∞–∑–æ–≤.
- –í–∞–∂–Ω—ã–µ –≤—ã–≤–æ–¥—ã: –ø–æ–¥–º–æ–¥—É–ª–∏ Git –Ω–µ –∏–º–µ—é—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö .git –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π (–∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π .git), –ø–æ—ç—Ç–æ–º—É —Å–∫—Ä–∏–ø—Ç –ø–æ–∏—Å–∫–∞ repos –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≥–∏–±–∫–∏–º; –¥–ª—è sandbox —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –∑–∞–ø–∏—Å–∏ –ª—É—á—à–µ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å repos –≤ –æ–±—Ä–∞–∑, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã; Sourcegraph —Ç—Ä–µ–±—É–µ—Ç write-–¥–æ—Å—Ç—É–ø –≤ /var/opt/sourcegraph/repos –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è .p4home, –ø–æ—ç—Ç–æ–º—É –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ read-only –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

- –ú–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ä–µ—Ç–æ–≤: —Å–æ–∑–¥–∞–Ω mask.py —Å —Ñ—É–Ω–∫—Ü–∏–µ–π main() –∫–æ—Ç–æ—Ä–∞—è –∫–æ–ø–∏—Ä—É–µ—Ç repos ‚Üí repos_safe —Å –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ mask_secrets; –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ extract_binary_content; repos_safe –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ .gitignore; –ø–æ—Å–ª–µ –º–∞—Å–∫–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤ repos_safe —Å –ø–µ—Ä–≤—ã–º –∫–æ–º–º–∏—Ç–æ–º.
- Docker –æ–±—Ä–∞–∑—ã: sandbox –∏ sourcegraph –∫–æ–ø–∏—Ä—É—é—Ç repos_safe –≤ –æ–±—Ä–∞–∑—ã (–∏–∑–æ–ª—è—Ü–∏—è), graphrag —Ç–∞–∫–∂–µ –∫–æ–ø–∏—Ä—É–µ—Ç repos_safe ‚Üí /app/repos; Sourcegraph –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ–¥–ø–∞–ø–∫–∏ (postgresql, zoekt, blobstore, redis, grafana, prometheus) –¥–ª—è –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –Ω–µ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç /var/opt/sourcegraph/repos —á—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å repos –∏–∑ –æ–±—Ä–∞–∑–∞; GraphRAG –º–æ–Ω—Ç–∏—Ä—É–µ—Ç —Ç–æ–ª—å–∫–æ ./data/graphrag/.graphrag –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –º–µ–∂–¥—É –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.
- GraphRAG –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è: –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ entrypoint.sh –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞; –µ—Å–ª–∏ –∏–Ω–¥–µ–∫—Å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (–ø—Ä–æ–≤–µ—Ä–∫–∞ .graphrag/config.yaml) - –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è; –∏–Ω–¥–µ–∫—Å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ volume –º–µ–∂–¥—É –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞; graphrag_query –≤ tools.py —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ Docker API (–æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É rag-assistant-graphrag-1) –≤–º–µ—Å—Ç–æ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞; —É–¥–∞–ª—ë–Ω graphrag_build.py - –≤—Å—è –ª–æ–≥–∏–∫–∞ –≤ entrypoint.sh.
- –ò–∑–æ–ª—è—Ü–∏—è –∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: repos –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –≤ –æ–±—Ä–∞–∑–∞—Ö (–Ω–µ –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è), –¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–±—É—é—Ç –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ (–∏–Ω–¥–µ–∫—Å—ã, –ë–î) –º–æ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –ø–æ–¥–ø–∞–ø–∫–∞–º–∏; –ø—Ä–∏ –ø–µ—Ä–µ—Å–±–æ—Ä–∫–µ –æ–±—Ä–∞–∑–∞ repos –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∏–∑ repos_safe; –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ repos –æ—Å—Ç–∞—é—Ç—Å—è –∏–∑ –æ–±—Ä–∞–∑–∞.

- –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: —É–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è list_all_files –∏–∑ utils.py, –ª–æ–≥–∏–∫–∞ –≤—Å—Ç—Ä–æ–µ–Ω–∞ –≤ build.py —á–µ—Ä–µ–∑ REPOS_ROOT.rglob('**/*'); build.py –±–æ–ª—å—à–µ –Ω–µ –∏—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è–º, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã –Ω–∞–ø—Ä—è–º—É—é; —É–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è _split_file_path –∏–∑ sourcegraph.py - —Ä–∞–±–æ—Ç–∞ –Ω–∞–ø—Ä—è–º—É—é —Å rel_path –∫–∞–∫ –ø—É—Ç—ë–º –≤–Ω—É—Ç—Ä–∏ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è; –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ SOURCEGRAPH_REPO_NAME –≤ utils.py –¥–ª—è –∏–º–µ–Ω–∏ –µ–¥–∏–Ω–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ sourcegraph.py: —É–±—Ä–∞–Ω—ã –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—é –∏–∑ sg_search –∏ sg_codeintel (—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω); —É–±—Ä–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è $repo –∏–∑ GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤ - –∏–º—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤—Å—Ç—Ä–æ–µ–Ω–æ –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ —á–µ—Ä–µ–∑ f-string; —É–±—Ä–∞–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è $rev –∏–∑ GraphQL –∑–∞–ø—Ä–æ—Å–æ–≤ - rev: HEAD –≤—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –≤ –∑–∞–ø—Ä–æ—Å; –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Å rel_path –∫–∞–∫ –ø—É—Ç—ë–º –≤–Ω—É—Ç—Ä–∏ –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –±–µ–∑ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –Ω–∞ repo/path.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ build.py: —Ü–∏–∫–ª –ø–æ —Ñ–∞–π–ª–∞–º —á–µ—Ä–µ–∑ REPOS_ROOT.rglob('**/*') —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π is_file –∏ is_ignored –≤ —É—Å–ª–æ–≤–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞; —É–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã os –∏–∑ tools.py; –ø—Ä–æ–≤–µ—Ä–∫–∞ is_ignored –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è hash; –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã –ø–æ–ª—É—á–∞—é—Ç current_hash=None –∏ —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –∏–Ω–¥–µ–∫—Å–∞.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏: README –æ–±–Ω–æ–≤–ª—ë–Ω –¥–ª—è –æ–ø–∏—Å–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã —Å –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º; –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ repos/ (–∏—Å—Ö–æ–¥–Ω—ã–µ) ‚Üí mask.py ‚Üí repos_safe/ ‚Üí docker compose build ‚Üí build.py ‚Üí chat.py; –æ–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ repo; –ø—Ä–æ–º–ø—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã –¥–ª—è –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

=== –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Sourcegraph 6.x ===

–ü—Ä–æ–±–ª–µ–º–∞: Sourcegraph 6.x –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Basic Auth –¥–ª—è GraphQL API, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–∫–µ–Ω.

–†–µ—à–µ–Ω–∏–µ: 
- –£–±—Ä–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ —á–µ—Ä–µ–∑ entrypoint (CSRF –ø—Ä–æ–±–ª–µ–º—ã)
- –¢–æ–∫–µ–Ω —Å–æ–∑–¥–∞—ë—Ç—Å—è –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ UI Sourcegraph
- Python –∫–æ–¥ —á–∏—Ç–∞–µ—Ç —Ç–æ–∫–µ–Ω –∏–∑ SOURCEGRAPH_TOKEN env –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –≤ README.md (—Ä–∞–∑–¥–µ–ª 2.1)

–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:
- sourcegraph.py: —É–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞, —Ç–æ–ª—å–∫–æ —á—Ç–µ–Ω–∏–µ –∏–∑ SOURCEGRAPH_TOKEN
- images/sourcegraph/entrypoint.sh: —É–±—Ä–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è create_token, –æ—Å—Ç–∞–≤–ª–µ–Ω —Ç–æ–ª—å–∫–æ src serve-git
- images/sourcegraph/extsvc.json: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å repos/.git (—Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –æ—Ç src serve-git)
- README.MD: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ç–æ–∫–µ–Ω–∞

–í–∞–∂–Ω–æ: 
- repos/.git - —ç—Ç–æ —Ä–µ–∞–ª—å–Ω—ã–π –ø—É—Ç—å –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞—ë—Ç src serve-git
- repositoryPathPattern: "monorepo" - —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ UI, –Ω–µ –º–µ–Ω—è–µ—Ç URL –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è

=== –£–¥–∞–ª–µ–Ω–∏–µ GraphRAG –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞ ===

–ü—Ä–∏—á–∏–Ω–∞: GraphRAG –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–µ embedding –º–æ–¥–µ–ª–∏ (BAAI/bge-m3) - —Ç—Ä–µ–±—É–µ—Ç API –∫–ª—é—á–∏ –¥–∞–∂–µ –¥–ª—è HuggingFace –º–æ–¥–µ–ª–µ–π, —Å–ª–æ–∂–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —á–µ—Ä–µ–∑ litellm, –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏, –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å—é –º–æ–¥–µ–ª–µ–π.

–ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ:
- –°–µ—Ä–≤–∏—Å graphrag –∏–∑ docker-compose.yml
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è images/graphrag/ (Dockerfile, entrypoint.sh, settings.yaml)
- –§—É–Ω–∫—Ü–∏—è graphrag_query –∏–∑ tools.py
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç graphrag_query –∏–∑ TOOLS_SCHEMA
- –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è GRAPHRAG_CONTAINER_NAME –∏–∑ utils.py
- –ò–º–ø–æ—Ä—Ç—ã –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ graphrag_query –∏–∑ chat.py
- –£–ø–æ–º–∏–Ω–∞–Ω–∏–µ graphrag_query –∏–∑ –ø—Ä–æ–º–ø—Ç–∞ chat_system_gather.txt
- –í—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è GraphRAG –∏–∑ README.MD (–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞, –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –æ–ø–∏—Å–∞–Ω–∏–µ)

–û—Å—Ç–∞–ª–æ—Å—å: Elasticsearch (–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–∏—Å–∫), Sourcegraph (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑), Docker Sandbox (–±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥).

- –î–æ–±–∞–≤–ª–µ–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç sg_file_neighbors: –Ω–∞—Ö–æ–¥–∏—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã—Ö —Å–æ—Å–µ–¥–µ–π —Ñ–∞–π–ª–∞ —á–µ—Ä–µ–∑ references —Å–∏–º–≤–æ–ª–æ–≤ (sourcegraph.py); –¥–æ–±–∞–≤–ª–µ–Ω –≤ TOOLS_SCHEMA (tools.py) –∏ TOOLS_MAP (chat.py); –æ–ø–∏—Å–∞–Ω –≤ –ø—Ä–æ–º–ø—Ç–µ chat_system_gather.txt; –æ–±–Ω–æ–≤–ª–µ–Ω README.MD —Å –ø—Ä–∏–º–µ—Ä–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.


- [–ü–†–û–ë–õ–ï–ú–ê –ò–ù–î–ï–ö–°–ê–¶–ò–ò SOURCEGRAPH] –ù–∞–π–¥–µ–Ω–æ: Sourcegraph –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–≤–∫–ª—é—á–∞—è YAML). –≠—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π SCIP-–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ - –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –æ–±—â–∏–π –∏–Ω–¥–µ–∫—Å –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞. –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É sg_file_neighbors (—Ñ—É–Ω–∫—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ API), –Ω–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º–∏ –¥–ª—è —Ñ–∞–π–ª–æ–≤ –±–µ–∑ —Ä–µ–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤.

=== –û–¢–ö–ê–ó –û–¢ SOURCEGRAPH ===

–ü—Ä–∏—á–∏–Ω–∞ –æ—Ç–∫–∞–∑–∞: Sourcegraph —Å–ª–∏—à–∫–æ–º —Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã–π, –º–∞–ª–æ –º–∞–Ω—ë–≤—Ä–µ–Ω–Ω—ã–π –∏ –º–∞–ª–æ –ø–æ–ª–µ–∑–Ω—ã–π –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–µ–π—Å–∞.

–ü—Ä–æ–±–ª–µ–º—ã:
- SCIP –∏–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–ª—è –ö–ê–ñ–î–û–ì–û —è–∑—ã–∫–∞ (pom.xml, build.gradle, package.json, go.mod –∏ —Ç.–¥.)
- –í –º–æ–Ω–æ—Ä–µ–ø–æ —Å –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ –±–µ–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–æ–≤ Sourcegraph –ø–∞–¥–∞–µ—Ç –≤ fallback (ctags), –≤–æ–∑–≤—Ä–∞—â–∞—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- Precise-–∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä—ã –Ω–µ –º–æ–≥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –ø–µ—Ä–µ–º–µ—à–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –¢—Ä–µ–±—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç–æ–∫–µ–Ω–æ–≤, —Å–ª–æ–∂–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –±–æ–ª—å—à–æ–π overhead

–†–µ—à–µ–Ω–∏–µ: –ø–æ–ª–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ Sourcegraph –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞.

–ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ:
- –°–µ—Ä–≤–∏—Å sourcegraph –∏–∑ docker-compose.yml
- –°–µ—Ä–≤–∏—Å caddy –∏–∑ docker-compose.yml (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è Sourcegraph)
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è images/sourcegraph/ (Dockerfile, entrypoint.sh, index.sh, extsvc.json)
- –§–∞–π–ª sourcegraph.py —Å–æ –≤—Å–µ–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (sg_search, sg_codeintel, sg_blob, sg_file_neighbors)
- –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã sg_* –∏–∑ tools.py –∏ TOOLS_SCHEMA
- TOOLS_MAP –º–∞–ø–ø–∏–Ω–≥–∏ –¥–ª—è sg_* –∏–∑ chat.py
- –£–ø–æ–º–∏–Ω–∞–Ω–∏—è Sourcegraph –∏–∑ –ø—Ä–æ–º–ø—Ç–æ–≤ (chat_system_gather.txt)
- –í—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è Sourcegraph –∏–∑ README.MD
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ SOURCEGRAPH_* –∏–∑ utils.py
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ SOURCEGRAPH_* –∏–∑ .env –ø—Ä–∏–º–µ—Ä–æ–≤
 
=== –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ–¥–∏–Ω –∏–Ω–¥–µ–∫—Å (chunks) –∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö ===
- –£–¥–∞–ª—ë–Ω –∏–Ω–¥–µ–∫—Å files; –≤–µ—Å—å —Ñ–∞–π–ª —Ö—Ä–∞–Ω–∏—Ç—Å—è –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —á–∞–Ω–∫: chunk_id=0, kind=whole
- build.py: —Å–ø–ª–∏—Ç ‚Üí prepend whole-–±–ª–æ–∫ ‚Üí –æ–ø–∏—Å—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –æ–¥–Ω–∏–º —Ç—É–ª–æ–º ‚Üí –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º actions –Ω–∞–ø—Ä—è–º—É—é (bulk)
- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —Ç—É–ª describe_tool: –æ–¥–∏–Ω schema –¥–ª—è —Ñ–∞–π–ª–∞ –∏ —á–∞–Ω–∫–æ–≤; —Å—Ç–∞—Ä—ã–µ DESCRIBE_FILE/Block —É–¥–∞–ª–µ–Ω—ã
- –ü—Ä–æ–º–ø—Ç—ã: –æ—Å—Ç–∞–≤–ª–µ–Ω—ã split_blocks.txt –∏ describe.txt; describe_block.txt/describe_file.txt —É–¥–∞–ª–µ–Ω—ã
- –ü–æ–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã: –∏ –≤ chunk(–≤–∫–ª—é—á–∞—è id=0) –∏ –≤ —Ñ–∞–π–ª–µ (—Ç–µ–ø–µ—Ä—å —Ç–æ–∂–µ –≤ —á–∞–Ω–∫–µ) –µ—Å—Ç—å hash, text, embedding, llm_version, size, lines, extension, filename, mime, created_at, updated_at
- edges —É–ø—Ä–æ—â—ë–Ω: —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–æ–∫ —Ñ–æ—Ä–º–∞—Ç–∞ typeA@nameA‚ÜítypeB@nameB (–¥–ª—è –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)
- tools.py: –¥–æ–±–∞–≤–ª–µ–Ω—ã/—É—Ç–æ—á–Ω–µ–Ω—ã –ø–æ–ª—è likely_queries, io, symbols, security_flags; descriptions –≤—ã—Ä–æ–≤–Ω–µ–Ω—ã
- retriever.py: –∏—Å–∫–ª—é—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —á–∞–Ω–∫–∏ —Ñ–∏–ª—å—Ç—Ä–æ–º chunk_id>=1
- images/elasticsearch: —É–¥–∞–ª—ë–Ω index_files.json; entrypoint.sh/Dockerfile —Å–æ–∑–¥–∞—é—Ç/–∫–æ–ø–∏—Ä—É—é—Ç —Ç–æ–ª—å–∫–æ index_chunks.json
- utils.py: —É–¥–∞–ª—ë–Ω ES_INDEX_FILES; –¥–æ–±–∞–≤–ª–µ–Ω EMBED_DIMS (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 1024)
- docker-compose.yml: –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ES_INDEX_FILES —É–¥–∞–ª–µ–Ω–∞
 
=== –†–µ–≥–∏—Å—Ç—Ä–æ–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å path –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –ø—Ä–∞–≤–∫–∏ (2025-11-07) ===
- –ü—Ä–∏–Ω—è—Ç–æ: –ø—É—Ç—å –≤ ES –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–æ–∑–∞–≤–∏—Å–∏–º—ã–º (Linux-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å), –Ω–∏–∫–∞–∫–æ–π –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏–∏.
- images/elasticsearch/index_chunks.json: –ø–æ–ª–µ path ‚Üí { "type": "keyword" } (—É–±—Ä–∞–Ω normalizer lower_ascii).
- build.py: –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä –ø—É—Ç–∏ –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ —É–¥–∞–ª–µ–Ω–∏–∏; –æ—Ç –∏–¥–µ–∏ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–≥–æ .lower() –æ—Ç–∫–∞–∑–∞–ª–∏—Å—å.
- –ü—Ä–æ–≥—Ä–µ–≤ Claude: warm_claude_cache() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–µ–π; –ø—Ä–æ–≥—Ä–µ–≤–∞—é—Ç—Å—è system-–ø—Ä–æ–º–ø—Ç—ã –∏ —Å—Ö–µ–º—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤–∫–ª—é—á–∞—è describe (–∫—Ä—É–ø–Ω—ã–π —Ç—É–ª).
- tools.py: describe_tool –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ describe; –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã uniqueItems ‚Üí True.
- ES mapping: –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è io, symbols, security_flags –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —Å DESCRIBE_TOOL.

=== –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è: –ø–æ—à–∞–≥–æ–≤—ã–π describe –∏ per-request prompt caching (2025-11-07) ===
- –û—Ç–∫–∞–∑ –æ—Ç –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ–≤–∞: —É–¥–∞–ª–µ–Ω—ã warm-–≤—ã–∑–æ–≤—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º per-request ephemeral caching (anthropic-beta: prompt-caching-2024-07-31).
- DESCRIBE_TOOL: –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –Ω–∞–±–æ—Ä –∏–∑ ~10 –º–∏–∫—Ä–æ-—Ç—É–ª–æ–≤ (describe_identity, describe_api, describe_entities, ...). –ü–æ—à–∞–≥–æ–≤–æ –≤—ã–∑—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —Ç—É–ª.
- –£–±—Ä–∞–Ω –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä {FIELDS} –∏–∑ –ª–æ–≥–∏–∫–∏; system —Å—Ç–∞–±–∏–ª–µ–Ω, user —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞.
- –ö—ç—à–∏—Ä—É–µ–º —Ç–æ–ª—å–∫–æ –∫—Ä—É–ø–Ω—ã–µ –±–ª–æ–∫–∏: DESCRIBE_SYSTEM –∏ —Ç–µ–∫—Å—Ç —á–∞–Ω–∫–∞; —Å–ø–∏—Å–æ–∫ –ø–æ–ª–µ–π –º–∞–ª–µ–Ω—å–∫–∏–π –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏.
- –°—Ö–µ–º—ã tool –Ω–µ –∫—ç—à–∏—Ä—É–µ–º —Ç–µ–∫—Å—Ç–æ–º; –ø–µ—Ä–µ–¥–∞—ë–º —Ç–æ–ª—å–∫–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ tools (–∫–∞–∫ –ø–æ–ª–æ–∂–µ–Ω–æ).
- meta —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ update –æ—Ç–≤–µ—Ç–∞ —Ç—É–ª–∞ (–±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–∞—Ä–Ω–∏–Ω–≥–æ–≤ –ø–æ –ø–æ–ª—è–º).

=== –ü–æ—Å—Ç-–ø—Ä–æ—Ü–µ—Å—Å–∏–Ω–≥ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ (graph_processor.py) ===
- –°–æ–∑–¥–∞–Ω graph_processor.py –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–æ–≤.
- –ê–ª–≥–æ—Ä–∏—Ç–º: –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã —á–∞–Ω–∫–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –ø–æ –≤—Å–µ–º –ø–æ–ª—è–º —Å–∏–≥–Ω–∞–ª–æ–≤ (symbols, paths, imports, api_endpoints, db_entities, dependencies –∏ —Ç.–¥.); –≤–µ—Å —Å–≤—è–∑–∏ = —Å—É–º–º–∞ (–≤–µ—Å_–ø–æ–ª—è √ó –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ_—Å–æ–≤–ø–∞–¥–µ–Ω–∏–π) –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è–º–∏.
- –í–µ—Å–∞ –ø–æ–ª–µ–π: symbols (11.0), paths (9.0), api_endpoints (9.0), keys (8.0), db_entities (8.0), dependencies (7.0), events_queues (7.0), idents/headers_auth_scopes/errors_codes (5.0), imports/functions/classes/variables (4.0), –∏ —Ç.–¥. –¥–æ todos (1.0).
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞–∂–¥—ã–π —á–∞–Ω–∫ –æ–±–æ–≥–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–µ–º links (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤) —Å —Ç–æ–ø-N —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —á–∞–Ω–∫–∞–º–∏; –∫–∞–∂–¥–∞—è —Å–≤—è–∑—å —Å–æ–¥–µ—Ä–∂–∏—Ç target (ID —á–∞–Ω–∫–∞), weight (–≤–µ—Å —Å–≤—è–∑–∏), field_contributions (—Å–ª–æ–≤–∞—Ä—å –ø–æ–ª–µ–π –∏ –∏—Ö –≤–∫–ª–∞–¥–∞ –≤ –≤–µ—Å, –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ —É–±—ã–≤–∞–Ω–∏—é).
- –ò–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ—Å—Ç—å: –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —á–∞–Ω–∫–∏ –±–µ–∑ –ø–æ–ª—è links; –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–æ–≤—ã—Ö —á–∞–Ω–∫–æ–≤.
- –ü–æ–ª–µ links –≤ ES: type="object", enabled=false (—Ö—Ä–∞–Ω–∏—Ç—Å—è, –Ω–æ –Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤).
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: –≥—Ä–∞—Ñ —Å–≤—è–∑–µ–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å —Å–≤—è–∑–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–∏ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ, —É–ª—É—á—à–∞—è recall –∑–∞ —Å—á—ë—Ç —Å–≤—è–∑–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞.

=== –£–ø—Ä–æ—â–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π: —Ç–æ–ª—å–∫–æ symbols + Q-A (2025-01-XX) ===
- –ü–µ—Ä–µ–¥–µ–ª–∞–Ω–æ: —É—á–∏—Ç—ã–≤–∞–µ–º —Ç–æ–ª—å–∫–æ symbols (—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ —Å–≤—è–∑–∏) –∏ Q-A —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ embeddings (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Å–≤—è–∑–∏).
- –£–±—Ä–∞–Ω—ã –≤–µ—Å–∞ –¥–ª—è symbols: —Å–≤—è–∑–∏ –ø–æ symbols –±–µ–∑ –≤–µ—Å–æ–≤, —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç –Ω–∞–ª–∏—á–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤ symbols.
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ links_qa: –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è QA-—Å–≤—è–∑–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–∞—Ä–µ –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç –∏ similarity (0..1).
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ links: {"target": chunk_id, "symbols": [...]} - —Å–ø–∏—Å–æ–∫ –æ–±—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ –¥–ª—è —Å–≤—è–∑–∏.
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ links_qa: {"target": chunk_id, "similarity": float, "answer": str, "question": str} - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ QA-—Å–≤—è–∑–∏.
- –ü–µ—Ä–µ—Å—á—ë—Ç –≥—Ä–∞—Ñ–∞: –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤ –∫–∞–∂–¥—ã–π —Ä–∞–∑ (–Ω–µ —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±–æ–≥–∞—â—ë–Ω–Ω—ã–µ), —É—á–∏—Ç—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –∏ —É–¥–∞–ª—ë–Ω–Ω—ã–µ —á–∞–Ω–∫–∏.
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç—å –±–∞—Ç—á–µ–º –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–µ–∑ N+1 –ø—Ä–æ–±–ª–µ–º.
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: —Ç–æ–ø-N —Å–≤—è–∑–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ–±—â–∏—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–¥–ª—è links) –∏ –ø–æ similarity (–¥–ª—è links_qa).

=== –ì—Ä–∞—Ñ —Å–≤—è–∑–µ–π —á–µ—Ä–µ–∑ Q-A —ç–º–±—ç–¥–¥–∏–Ω–≥–∏ (2025-01-XX) ===
- –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω graph_processor.py: –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É —á–∞–Ω–∫–∞–º–∏ —á–µ—Ä–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–º–±—ç–¥–¥–∏–Ω–≥–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤.
- –ê–ª–≥–æ—Ä–∏—Ç–º: –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã —á–∞–Ω–∫–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è cosine similarity –º–µ–∂–¥—É answers –æ–¥–Ω–æ–≥–æ —á–∞–Ω–∫–∞ –∏ questions –¥—Ä—É–≥–æ–≥–æ (–≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã), —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª—É—á—à–∞—è –ø–∞—Ä–∞ —Å similarity >= 0.7.
- –≠–º–±—ç–¥–¥–∏–Ω–≥–∏: –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –Ω–∞ –ª–µ—Ç—É –ø—Ä–∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–∏ –≥—Ä–∞—Ñ–∞ (–Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –∏–Ω–¥–µ–∫—Å), –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –¥–ª—è –≤—Å–µ—Ö —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤.
- –†–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞–∂–¥—ã–π —á–∞–Ω–∫ –æ–±–æ–≥–∞—â–∞–µ—Ç—Å—è –ø–æ–ª–µ–º links (–º–∞—Å—Å–∏–≤ –æ–±—ä–µ–∫—Ç–æ–≤) —Å —Ç–æ–ø-5 —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —á–∞–Ω–∫–∞–º–∏; –∫–∞–∂–¥–∞—è —Å–≤—è–∑—å —Å–æ–¥–µ—Ä–∂–∏—Ç target (ID —á–∞–Ω–∫–∞), similarity (0..1), answer (—Ç–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞), question (—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞).
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: QA_SIMILARITY_THRESHOLD = 0.7, MAX_LINKS_PER_CHUNK = 5.
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ –ø–∞–º—è—Ç—å –±–∞—Ç—á–µ–º —á–µ—Ä–µ–∑ scroll API, –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –≥—Ä–∞—Ñ–∞ –¥–ª—è –≤—Å–µ—Ö —á–∞–Ω–∫–æ–≤ –∫–∞–∂–¥—ã–π —Ä–∞–∑.

=== –£–ø—Ä–æ—â–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞: —Ç–æ–ª—å–∫–æ Q-A —Å–≤—è–∑–∏ (2025-01-XX) ===
- –£–¥–∞–ª–µ–Ω—ã —Å–≤—è–∑–∏ –ø–æ symbols: –æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ Q-A —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ embeddings.
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ: links_qa ‚Üí links (–µ–¥–∏–Ω–æ–µ –ø–æ–ª–µ –¥–ª—è –≤—Å–µ—Ö —Å–≤—è–∑–µ–π).
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ links: [{"target": chunk_id, "similarity": float, "answer": str, "question": str}] - –º–∞—Å—Å–∏–≤ —Å–≤—è–∑–µ–π —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–∞—Ä–µ –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç –∏ similarity (0..1).
- –ê–ª–≥–æ—Ä–∏—Ç–º: –¥–ª—è –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã —á–∞–Ω–∫–æ–≤ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è cosine similarity –º–µ–∂–¥—É answers –æ–¥–Ω–æ–≥–æ –∏ questions –¥—Ä—É–≥–æ–≥–æ (–≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã), —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ª—É—á—à–∞—è –ø–∞—Ä–∞.
- –ü–æ—Ä–æ–≥: QA_SIMILARITY_THRESHOLD = 0.7, MAX_LINKS_PER_CHUNK = 5.
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è: –≤—Å–µ embeddings –∫—ç—à–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –≥—Ä–∞—Ñ–∞ –±–∞—Ç—á–µ–º.

=== –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ –ø–æ–∏—Å–∫ (2025-01-XX) ===
- –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä signals –≤ main_search: –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –æ–±—ä–µ–∫—Ç —Å –º–∞—Å—Å–∏–≤–∞–º–∏ —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ —Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ.
- FIELD_WEIGHTS –≤ retriever.py: –≤–µ—Å–∞ –¥–ª—è boost –≤ ES –∑–∞–ø—Ä–æ—Å–∞—Ö (symbols: 5.5, paths/api_endpoints: 4.5, keys/db_entities/dependencies/events_queues: 3.5, –æ—Å—Ç–∞–ª—å–Ω—ã–µ: 1.5, tags/key_points/todos: 0.75).
- –†–µ–∞–ª–∏–∑–∞—Ü–∏—è: –∫–∞–∂–¥—ã–π —Å–∏–≥–Ω–∞–ª –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ terms query –≤ should clauses —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º boost.
- bm25_boost_terms: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è —Ç–µ—Ä–º–∏–Ω—ã –∏–∑ –∑–∞–ø—Ä–æ—Å–∞ –∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è terms query –ø–æ –ø–æ–ª—é bm25_boost_terms –≤ —á–∞–Ω–∫–∞—Ö (boost: 1.5).
- –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ö–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: —É–±—Ä–∞–Ω—ã –≤—Å–µ description –∏–∑ MAIN_SEARCH_TOOL, CODE_STATS_TOOL, EXECUTE_COMMAND_TOOL, SPLIT_BLOCKS_TOOL - –æ–ø–∏—Å–∞–Ω–∏—è –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ –ø—Ä–æ–º–ø—Ç—ã –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ç–æ–∫–µ–Ω–æ–≤.
- –ü–∞—Ä–∞–º–µ—Ç—Ä fields: –¥–æ–±–∞–≤–ª–µ–Ω –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ –ø–æ–ª–µ–π –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞; –≤—Å–µ –ø–æ–ª—è –¥–æ—Å—Ç—É–ø–Ω—ã —á–µ—Ä–µ–∑ node.metadata.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ retriever: –≤—Å–µ–≥–¥–∞ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ –ø–æ–ª—è —á–∞–Ω–∫–æ–≤ –∏–∑ ES (–±–µ–∑ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ _source), —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è/–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –≤ main_search –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
- bm25_boost_terms –ø–µ—Ä–µ–Ω–µ—Å—ë–Ω –∏–∑ DESCRIBE_SIGNALS_B_TOOL –≤ DESCRIBE_CORE_TOOL (–Ω–µ —Å–∏–≥–Ω–∞–ª, –∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –ø–æ–∏—Å–∫–∞).
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø—Ä–æ–º–ø—Ç—ã: chat_system_gather.txt —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏—è –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–æ–ª–µ–π –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –≤–∫–ª—é—á–∞—è links –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–π —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç–∏.

=== –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ code_stats –¥–æ –ø–∞–Ω–µ–ª–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è (2025-01-XX) ===
- –†–∞—Å—à–∏—Ä–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è code_stats –¥–æ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –ø–∞–Ω–µ–ª–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è –∑–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö –∏–∑ ES.
- Runtime-–ø–æ–ª—è: –¥–æ–±–∞–≤–ª–µ–Ω—ã chunk_len (–¥–ª–∏–Ω–∞ —á–∞–Ω–∫–∞ –≤ —Å—Ç—Ä–æ–∫–∞—Ö) –∏ top_dir (–≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤–∞—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è) —á–µ—Ä–µ–∑ runtime_mappings –≤ ES.
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–∞–∑–º–µ—Ä–æ–≤: –ø—Ä–æ—Ü–µ–Ω—Ç–∏–ª–∏ (p50/p90/p99) –∏ extended_stats (min/max/avg/stddev) –¥–ª—è –¥–ª–∏–Ω—ã —á–∞–Ω–∫–æ–≤.
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —è–∑—ã–∫–∞–º: —Ñ–∞–π–ª—ã, —á–∞–Ω–∫–∏, —Å—Ç—Ä–æ–∫–∏, p50 –¥–ª–∏–Ω—ã, –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, —Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å.
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è–º —Ñ–∞–π–ª–æ–≤ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–º —Å–ª–æ—è–º —Å p50 –¥–ª–∏–Ω—ã.
- –¢–æ–ø –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –ø–æ –º–µ—Å—è—Ü–∞–º (–ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü –æ—Ç–¥–µ–ª—å–Ω–æ).
- –î–∞—Ç–∞-–≥–∏—Å—Ç–æ–≥—Ä–∞–º–º–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 –º–µ—Å—è—Ü–µ–≤).
- –î—É–±–ª–∏–∫–∞—Ç—ã –ø–æ hash —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø—É—Ç–µ–π –∏ —Å—Ç—Ä–æ–∫ (—Ç–æ–ø-10, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–∞–∑–º–µ—Ä—É –≥—Ä—É–ø–ø—ã).
- –ö–∞—Ä—Ç–∞ –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏: —Ç–æ–ø API endpoints, DB entities, dependencies (dependencies —á–µ—Ä–µ–∑ sampler –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏).
- –°–∏–≥–Ω–∞–ª—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏—è: secrets, security_flags, permissions, roles, feature_flags, todos, bugs, vulnerabilities.
- –í–µ—Ä—Å–∏–∏ –ø–∞–π–ø–ª–∞–π–Ω–∞ LLM —Å –º–µ—Ç—Ä–∏–∫–∞–º–∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –¥–≤–æ–π–Ω–æ–π —Å—á—ë—Ç –¥–ª—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–æ–≤: pipeline-–∞–≥—Ä–µ–≥–∞—Ç—ã by_file ‚Üí sum_bucket –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ–¥—Å—á—ë—Ç–∞ –ø–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã–º path.
- –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è safe_number –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è NaN/None –∑–Ω–∞—á–µ–Ω–∏–π.
- –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: precision_threshold (40000) –¥–ª—è cardinality, sampler (shard_size: 5000) –¥–ª—è dependencies, request_cache=True –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è.
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞: order –ø–æ –º–µ—Ç—Ä–∏–∫–∞–º (lines, chunk_count, max_lines, _count) –≤–º–µ—Å—Ç–æ doc_count.
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –∫–ª—é—á–µ–π: exclude: "" –¥–ª—è high-cardinality –ø–æ–ª–µ–π (api_endpoints, db_entities, dependencies, hash, symbols, functions, classes).
- –ó–∞—â–∏—Ç–∞ runtime-—Å–∫—Ä–∏–ø—Ç–æ–≤: –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç–æ–π path –≤ top_dir.
- UX —É–ª—É—á—à–µ–Ω–∏—è: missing: "unknown" –¥–ª—è kinds –∏ layers, —Å–ø–µ—Ü-–ª–µ–π–±–ª <no-ext> –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è "none", –≤—ã–≤–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –º–µ—Å—è—Ü–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è—Ö.
- –í—Å–µ –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º ES —Å —Ç–∞–π–º–∞—É—Ç–æ–º 60 —Å–µ–∫—É–Ω–¥.

=== –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –≤ —á–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (2025-01-XX) ===
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ (chat.py).
- –ö–Ω–æ–ø–∫–∞ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∞ —Ä—è–¥–æ–º —Å –ø–æ–ª–µ–º –≤–≤–æ–¥–∞, –ø–µ—Ä–µ–¥ –∫–Ω–æ–ø–∫–æ–π "–û—Ç–ø—Ä–∞–≤–∏—Ç—å".
- –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç code_stats("") –Ω–∞–ø—Ä—è–º—É—é –±–µ–∑ LLM –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –∏—Å—Ç–æ—Ä–∏—é —á–∞—Ç–∞.
- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ markdown —Å –∑–∞–≥–æ–ª–æ–≤–∫–æ–º "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã".
- –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –±—ã—Å—Ç—Ä–æ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –æ–¥–Ω–∏–º –∫–ª–∏–∫–æ–º.

=== –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ (2025-01-XX) ===
- ES_INDEX –Ω–µ –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ utils.py: –¥–æ–±–∞–≤–ª–µ–Ω ES_INDEX = ES_INDEX_CHUNKS, –∑–∞—Ç–µ–º —É–±—Ä–∞–Ω –∫–∞–∫ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è ES_INDEX_CHUNKS –Ω–∞–ø—Ä—è–º—É—é.
- –ü–æ—Ç–µ—Ä—è —Ñ–∏–ª—å—Ç—Ä–∞ chunk_id >= 1 –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ path_prefix –≤ retriever.py: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤ [{"range": {"chunk_id": {"gte": 1}}}] + filters, —Ç–∞–∫–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ knn_filter.
- –ù–µ—Ç–æ—á–Ω–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ —Ñ–∞–π–ª –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏ –æ–± –æ—à–∏–±–∫–µ: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ index.json ‚Üí index_chunks.json.
- –ö–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∞—è –±—É–∫–≤–∞ –≤ –∏–º–µ–Ω–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã: –∑–∞–º–µ–Ω–µ–Ω–æ DESCRIBE_SIGNALS_–°_TOOL ‚Üí DESCRIBE_SIGNALS_C_TOOL (–ª–∞—Ç–∏–Ω—Å–∫–∞—è C) –≤ tools.py –∏ build.py.
- path_prefix –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –≤ CODE_STATS_TOOL: —É–±—Ä–∞–Ω required –∏–∑ —Å—Ö–µ–º—ã, —Ç–∞–∫ –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∏ —Ç—Ä–∞–∫—Ç—É–µ—Ç—Å—è –∫–∞–∫ "".
- KeyError –≤ tools.py –ø—Ä–∏ –≤—ã–∑–æ–≤–µ code_stats: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ p["path_prefix"] ‚Üí p.get("path_prefix", "").

=== –£–ø—Ä–æ—â–µ–Ω–∏–µ –∫–æ–¥–∞ (2025-01-XX) ===
- retriever.py: —É–ø—Ä–æ—â—ë–Ω _retrieve - —É–±—Ä–∞–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å—Ç—Ä–æ–≤, —É–ø—Ä–æ—â–µ–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ ES-–∑–∞–ø—Ä–æ—Å–∞, —Ñ–∏–ª—å—Ç—Ä –¥–ª—è knn —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞ –∫–æ–≥–¥–∞ –µ—Å—Ç—å filters (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ –∫–æ–≥–¥–∞ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ path_prefix —Ñ–∏–ª—å—Ç—Ä chunk_id >= 1 –Ω–µ –ø—Ä–∏–º–µ–Ω—è–ª—Å—è –∫ knn).
- retriever.py: —É–ø—Ä–æ—â—ë–Ω main_search - —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ header —á–µ—Ä–µ–∑ —Å–ø–∏—Å–æ–∫ header_parts, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 1048576 –≤–º–µ—Å—Ç–æ 1024 * 1024, —É–ø—Ä–æ—â–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π.
- graph_processor.py: —Ä–∞–∑–±–∏—Ç—ã —Å–ª–æ–∂–Ω—ã–µ list comprehensions –Ω–∞ —è–≤–Ω—ã–µ —Ü–∏–∫–ª—ã –¥–ª—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã dict/list comprehensions –≥–¥–µ —É–º–µ—Å—Ç–Ω–æ –¥–ª—è filtered –∏ actions.
- build.py: —É–ø—Ä–æ—â–µ–Ω–æ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ chunks - —É–±—Ä–∞–Ω—ã –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (chunk_size, embedding), –≤—Å—Ç—Ä–æ–µ–Ω—ã –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –Ω–∞–ø—Ä—è–º—É—é –≤ —Å–ª–æ–≤–∞—Ä—å chunk.

=== –ú–∏–Ω–∏–º–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –∏ —É–ø—Ä–æ—â–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ (2025-11-09) ===
- –£–ø—Ä–æ—â–µ–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏: –æ–¥–∏–Ω –≤—ã–∑–æ–≤ LLM –Ω–∞ —Ñ–∞–π–ª –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –≤—ã–∑–æ–≤–æ–≤ –ø–æ –∫–∞–∂–¥–æ–º—É —á–∞–Ω–∫—É. SPLIT_BLOCKS_TOOL —Ç–µ–ø–µ—Ä—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞ —Å—Ä–∞–∑—É bm25_boost_terms, symbols, graph_questions, graph_answers. –£–¥–∞–ª—ë–Ω —Ü–∏–∫–ª —Å DESCRIBE_TOOLS (–±—ã–ª–æ 4 –≤—ã–∑–æ–≤–∞ LLM –Ω–∞ –∫–∞–∂–¥—ã–π —á–∞–Ω–∫).
- –£–¥–∞–ª–µ–Ω—ã –≤—Å–µ describe tools: DESCRIBE_CORE_TOOL, DESCRIBE_SIGNALS_A_TOOL, DESCRIBE_SIGNALS_B_TOOL, DESCRIBE_SIGNALS_C_TOOL –∏ –∏—Ö –ø—Ä–æ–º–ø—Ç—ã (prompts/describe_core.txt, prompts/signals_A.txt, prompts/signals_B.txt, prompts/signals_C.txt).
- –£–¥–∞–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è code_stats –∏ CODE_STATS_TOOL: –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã –∏–∑ retriever.py, tools.py –∏ chat.py. –£–¥–∞–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞" –∏–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
- –£–ø—Ä–æ—â–µ–Ω–∏–µ retriever.py: —É–¥–∞–ª—ë–Ω —Å–ª–æ–≤–∞—Ä—å FIELD_WEIGHTS (28 —Å—Ç—Ä–æ–∫), —É–¥–∞–ª—ë–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä signals –∏–∑ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π (HybridESRetriever.__init__, retrieve_fusion_nodes, main_search). –ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ bm25_boost_terms –∏–∑ –∑–∞–ø—Ä–æ—Å–∞.
- –ó–∞–º–µ–Ω–∞ fields –Ω–∞ show_links: –ø–∞—Ä–∞–º–µ—Ç—Ä fields –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –±—É–ª–µ–≤ —Ñ–ª–∞–≥ show_links –≤ main_search. –ï—Å–ª–∏ show_links=true, –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–µ links –∏–∑ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —á–∞–Ω–∫–∞ (–º–∞—Å—Å–∏–≤ —Å–≤—è–∑–µ–π —Å –¥—Ä—É–≥–∏–º–∏ —á–∞–Ω–∫–∞–º–∏ —á–µ—Ä–µ–∑ –≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç).
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–æ–≤: chat_system_gather.txt —É–ø—Ä–æ—â—ë–Ω - —É–¥–∞–ª–µ–Ω—ã —É–ø–æ–º–∏–Ω–∞–Ω–∏—è signals, fields, code_stats, –¥–æ–±–∞–≤–ª–µ–Ω–æ –æ–ø–∏—Å–∞–Ω–∏–µ show_links.
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: descriptions MAIN_SEARCH_TOOL, EXECUTE_COMMAND_TOOL, SPLIT_BLOCKS_TOOL —Ä–∞—Å—à–∏—Ä–µ–Ω—ã –∑–∞ —Å—á—ë—Ç –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ç–µ–∫—Å—Ç–∞ –∏–∑ –ø—Ä–æ–º–ø—Ç–æ–≤; —É–ø—Ä–æ—â–µ–Ω–∞ —Å—Ö–µ–º–∞ MAIN_SEARCH_TOOL (–ø–∞—Ä–∞–º–µ—Ç—Ä—ã question, path_prefix, top_n) –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø–∏—Å–∞–Ω–∏—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏—Ö –ø–æ–ª–µ–π.

=== –£–ø—Ä–æ—â–µ–Ω–∏–µ chat.py –∏ –∏—Å—Ç–æ—Ä–∏–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (2025-11-10) ===
- –í–Ω–µ–¥—Ä—ë–Ω –µ–¥–∏–Ω—ã–π –º—É–ª—å—Ç–∏—Ñ–∞–∑–Ω—ã–π —Ü–∏–∫–ª –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏: –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ while-—Ü–∏–∫–ª–∞, –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ —Å—Ä–∞–∑—É –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –ø–∞—Ä—ã assistant/tool_use –∏ user/tool_result.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª tool-use: —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º tool_use —Å —Ç–µ–º –∂–µ id, —á—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–æ–≤—Ç–æ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤.
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã TOOLS –∏ MAX_TOOL_LOOPS –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ—Å—Ç–∏ –∫—ç—à–∞ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –∑–∞—Ü–∏–∫–ª–∏–≤–∞–Ω–∏—è (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 8 –∏—Ç–µ—Ä–∞—Ü–∏–π).
- –ò—Å—Ç–æ—Ä–∏—è —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ JSON-—Å—Ç—Ä–∞–Ω–∏—Ü—ã: page_json —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ canon_json, —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–ø–∞–∫–æ–≤—É—é—Ç—Å—è –≤ –∫—ç—à–∏—Ä—É–µ–º—ã–µ –±–ª–æ–∫–∏ (cache_control=ephemeral).
- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π system-–±–ª–æ–∫ —Ç–µ–ø–µ—Ä—å —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∫–∞–∫ text —Å minified JSON, —á—Ç–æ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å API –∏ –¥–∞—ë—Ç —Å—Ç–∞–±–∏–ª—å–Ω—ã–π cache hit.
- –í –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ñ–∞–∫—Ç-–±–ª–æ–∫ ([facts] ‚Ä¶) —Å –∫–ª—é—á–µ–≤—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, —á—Ç–æ–±—ã –Ω–µ —Ç–µ—Ä—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç.
- –î–æ–±–∞–≤–ª–µ–Ω —É—á—ë—Ç –∫—Ä–∞—Ç–∫–∏—Ö —Ñ–∞–∫—Ç–æ–≤ –ø–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º (search/get_chunks/execute_command) –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –ø—Ä–∏ –∑–∞–ø–∏—Å–∏ –≤ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.
- –£—Ç–æ—á–Ω–µ–Ω—ã descriptions –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: EXECUTE_COMMAND_TOOL –æ–ø–∏—Å—ã–≤–∞–µ—Ç –ª—é–±—ã–µ –∫–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã, MAIN_SEARCH_TOOL –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –æ –≤–ª–∏—è–Ω–∏–∏ reranker, SPLIT_BLOCKS_TOOL –¥–æ–ø–æ–ª–Ω–µ–Ω –ø—Ä–∏–º–µ—Ä–∞–º–∏ –¥–ª—è graph_questions/graph_answers.
- –û–±–Ω–æ–≤–ª—ë–Ω prompts/system_navigation.txt: –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –±–ª–æ–∫ –æ—Ç—Ä–∞–∂–∞–µ—Ç —Ä–µ–∞–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É repos_safe (java-pg, javafw) –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –≤–∫–ª—é—á–∞—Ç—å –≤–∞–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ tool-use –≤ –æ—Ç–≤–µ—Ç—ã.

=== –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º build.py (2025-01-XX) ===
- –ü—Ä–æ–≤–µ–¥—ë–Ω –≥–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫.
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–≤–µ—Ç–∞ Claude API –≤ build.py: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è tool_use –≤ –æ—Ç–≤–µ—Ç–µ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞—â–µ–Ω–∏–µ–º –∫ response.content[0].input["blocks"].
- –£–ª—É—á—à–µ–Ω –ø—Ä–æ–º–ø—Ç system_split_blocks.txt: –¥–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ "–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –≤—ã–∑–æ–≤–∏ 1 –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç split_blocks" –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–∏–∏ –≤—ã–∑–æ–≤–∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞.
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å—Ç—Ä–æ–∫: lines_list[start-1:end] –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ –¥–ª—è 1-–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å—Ç—Ä–æ–∫ (end_line –≤–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ).
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ cosine similarity –≤ graph_processor.py: np.dot –¥–ª—è –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤–µ–∫—Ç–æ—Ä–æ–≤ (normalize=True) –¥–∞—ë—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é cosine similarity.
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å: –ø–æ–ª–µ links –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç get_chunks –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –ø–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º —á–∞–Ω–∫–∞–º.
- –ü—Ä–æ–≤–µ—Ä–µ–Ω —Ñ–æ—Ä–º–∞—Ç ID —á–∞–Ω–∫–æ–≤: —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω –º–µ–∂–¥—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ (build.py —Å–æ–∑–¥–∞—ë—Ç "{rel_path}#{i}/{total}", graph_processor.py –∏ get_chunks –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ—Ç –∂–µ —Ñ–æ—Ä–º–∞—Ç).
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –≤ ES: –º–∞—Å—Å–∏–≤—ã keyword (graph_questions, graph_answers) –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ Elasticsearch.
- –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∞ —Å–≤—è–∑–µ–π: –∞–ª–≥–æ—Ä–∏—Ç–º –≤—ã—á–∏—Å–ª–µ–Ω–∏—è similarity —á–µ—Ä–µ–∑ Q-A embeddings –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω.
- –í—ã–≤–æ–¥—ã: –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã, –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∑–∞–ø—É—Å–∫—É –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞.

=== –õ–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–º —É—Ä–æ–≤–Ω–µ (2025-01-XX) ===
- –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –≤–∏—Å—è—á–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ –∏ –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É build.py –∏ graph_processor.py.
- –í—ã–≤–æ–¥: –ø—Ä–æ–±–ª–µ–º—ã –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω—ã, —Ç–∞–∫ –∫–∞–∫:
  1. –ß–∞–Ω–∫–∏ –Ω–µ —É–¥–∞–ª—è—é—Ç—Å—è –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏ graph_processor.py (build.py –∏ graph_processor.py –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ)
  2. –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ build.py –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–∞—Ñ–∞ —á–µ—Ä–µ–∑ graph_processor.py, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å
  3. build.py –∏ graph_processor.py –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ, —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥—Ä—É–≥ –∑–∞ –¥—Ä—É–≥–æ–º
  4. –ü–æ–ª–Ω—ã–π –ø–µ—Ä–µ—Å—á—ë—Ç –≥—Ä–∞—Ñ–∞ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ build.py —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –≤—Å–µ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –≤–∏—Å—è—á–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: build.py ‚Üí graph_processor.py (–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –ø–æ–ª–Ω–∞—è –ø–µ—Ä–µ—Å—Ç—Ä–æ–π–∫–∞ –≥—Ä–∞—Ñ–∞) –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö.

=== –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (2025-01-XX) ===
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤ get_es_files (build.py): –∑–∞–º–µ–Ω—ë–Ω size=10000 –Ω–∞ scroll API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.
- –û–±–Ω–æ–≤–ª—ë–Ω –ø—Ä–æ–º–ø—Ç system_navigation.txt: –¥–æ–±–∞–≤–ª–µ–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤.
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –ø—É—Å—Ç—ã–º–∏ answers: –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–∞ - –µ—Å–ª–∏ LLM –Ω–µ –≤–µ—Ä–Ω—É–ª —Ç–µ–∫—Å—Ç–æ–≤—ã–π –æ—Ç–≤–µ—Ç, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ –≤ –ø—Ä–æ–º–ø—Ç–µ —É–∫–∞–∑–∞–Ω–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å –æ—Ç–≤–µ—Ç—ã.
- –ü—Ä–æ–±–ª–µ–º–∞ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º candidates: –Ω–µ–∞–∫—Ç—É–∞–ª—å–Ω–∞ - –µ—Å–ª–∏ ES –≤–µ—Ä–Ω—É–ª –º–µ–Ω—å—à–µ –∫–∞–Ω–¥–∏–¥–∞—Ç–æ–≤, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ, –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–µ—Ç—Å—è.

=== –ü–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –º–∞–Ω–∏—Ñ–µ—Å—Ç —Ñ–∞–π–ª–∞ –≤–º–µ—Å—Ç–æ whole-–±–ª–æ–∫–∞ (chunk_id=0) (2025-01-XX) ===
- –£–±—Ä–∞–Ω—ã whole-–±–ª–æ–∫–∏ –∏–∑ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏: —É–¥–∞–ª–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è whole-–±–ª–æ–∫–∞ –≤ build.py, —É–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä whole-–±–ª–æ–∫–æ–≤ (LLM –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç whole-–±–ª–æ–∫–∏ –ø–æ —Å—Ö–µ–º–µ SPLIT_BLOCKS_TOOL).
- –°–æ–∑–¥–∞–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å file_manifest: –Ω–æ–≤—ã–π –∏–Ω–¥–µ–∫—Å ES –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤ (path + hash), –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç chunks.
- –ú–∞–Ω–∏—Ñ–µ—Å—Ç —Ñ–∞–π–ª–∞: —Å–æ–∑–¥–∞—ë—Ç—Å—è –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞ –≤ –∏–Ω–¥–µ–∫—Å–µ file_manifest —Å –ø–æ–ª—è–º–∏ path, hash, created_at, updated_at; _id –º–∞–Ω–∏—Ñ–µ—Å—Ç–∞ = rel_path.
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è: chunks —Å–æ–∑–¥–∞—é—Ç—Å—è —Å chunk_id –Ω–∞—á–∏–Ω–∞—è —Å 0 (–ø–µ—Ä–≤—ã–π –±–ª–æ–∫ = chunk_id=0, –≤—Ç–æ—Ä–æ–π = chunk_id=1 –∏ —Ç.–¥.), –º–∞–Ω–∏—Ñ–µ—Å—Ç —Å–æ–∑–¥–∞—ë—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ –≤ file_manifest.
- –£–¥–∞–ª–µ–Ω–∏–µ: —Ñ—É–Ω–∫—Ü–∏—è delete_file_data —É–¥–∞–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ –æ–±–æ–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤ (chunks –∏ file_manifest) –ø–æ path.
- –ü–æ–ª—É—á–µ–Ω–∏–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤: —Ñ—É–Ω–∫—Ü–∏—è get_file_manifest –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã –∏–∑ –∏–Ω–¥–µ–∫—Å–∞ file_manifest —á–µ—Ä–µ–∑ scroll API.
- –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏—è: delete_es_chunks ‚Üí delete_file_data, get_es_files ‚Üí get_file_manifest, ES_INDEX_MANIFESTS ‚Üí ES_INDEX_FILE_MANIFEST (–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á–∏—Å–ª–æ).
- –§–∞–π–ª—ã: —Å–æ–∑–¥–∞–Ω index_file_manifest.json —Å –º–∞–ø–ø–∏–Ω–≥–æ–º –¥–ª—è –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤, –æ–±–Ω–æ–≤–ª–µ–Ω—ã Dockerfile –∏ entrypoint.sh –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ file_manifest.
- Docker: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ES_INDEX_FILE_MANIFEST –≤ docker-compose.yml (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é "file_manifest").
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –±–∞–≥ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω: —É–±—Ä–∞–Ω —Ñ–∏–ª—å—Ç—Ä chunk_id >= 1 –∏–∑ retriever.py, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–∫–ª—é—á–∞–ª –ø–µ—Ä–≤—ã–π –±–ª–æ–∫ (chunk_id=0) –∏–∑ –ø–æ–∏—Å–∫–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –Ω–∞ –Ω—É–º–µ—Ä–∞—Ü–∏—é —Å 0.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: –º–∞–Ω–∏—Ñ–µ—Å—Ç —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –∏–Ω–¥–µ–∫—Å–µ, –Ω–µ —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è —Å chunks, –Ω–µ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –ø–æ–∏—Å–∫ (retriever –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ ES_INDEX_CHUNKS).
- –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: –º–µ–Ω—å—à–µ —à—É–º–∞ –≤ kNN (–Ω–µ—Ç –≥–∏–≥–∞–Ω—Ç—Å–∫–∏—Ö whole-–±–ª–æ–∫–æ–≤), –Ω–∏–∂–µ –ª–∞—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ (–Ω–µ —ç–º–±–µ–¥–¥–∏–º whole), –ª—É—á—à–µ precision –ø–æ–∏—Å–∫–∞, –ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ñ–∞–π–ª–∞ –∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ —á–∞–Ω–∫–æ–≤.

=== –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–∏–∞–ª–æ–≥–∞ (2025-01-XX) ===
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "–°—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å" –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞ (chat.py): –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—É–º–º–∞—Ä–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤–µ—Å—å –Ω–∞–∫–æ–ø–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞.
- –§—É–Ω–∫—Ü–∏—è summarize_dialog: —Å–æ–±–∏—Ä–∞–µ—Ç –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ history_pages –∏ raw, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Ö –≤ LLM —Å –ø—Ä–æ–º–ø—Ç–æ–º system_summarize.txt, —Å–æ–∑–¥–∞—ë—Ç –Ω–æ–≤—É—é –∫—ç—à–∏—Ä—É–µ–º—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–µ–π.
- –ü—Ä–æ–º–ø—Ç —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏: –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ prompts/system_summarize.txt, –∫—ç—à–∏—Ä—É–µ—Ç—Å—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–º—É –ø—Ä–æ–º–ø—Ç—É —á–µ—Ä–µ–∑ summarize_block (cache_control=ephemeral).
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è: –ø–æ—Å–ª–µ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏ –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã (history_pages) —Å–±—Ä–∞—Å—ã–≤–∞—é—Ç—Å—è, raw –æ—á–∏—â–∞–µ—Ç—Å—è, —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –≤ history_pages.
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ: SYSTEM_SUMMARIZE_BLOCK —Å–æ–∑–¥–∞—ë—Ç—Å—è —á–µ—Ä–µ–∑ summarize_block —Å text_block_cached, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–º–ø—Ç–∞ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö —á–µ—Ä–µ–∑ system=[SYSTEM_NAVIGATION_BLOCK] + history_pages[-3:], —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–∏–∞–ª–æ–≥–∞ –≤ —Å–∂–∞—Ç–æ–º –≤–∏–¥–µ.
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ - –∫—ç—à–∏—Ä—É–µ–º—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π –±–ª–æ–∫ —Å –ø—Ä–æ–º–ø—Ç–æ–º, –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ history_pages –∏ raw –≤–∫–ª—é—á–∞—é—Ç—Å—è –≤ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏—é, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ –Ω–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.