{
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "refresh_interval": "30s",
    "analysis": {
      "normalizer": {
        "lower_ascii": {
          "type": "custom",
          "filter": ["lowercase", "asciifolding"]
        }
      },
      "analyzer": {
        "code_friendly": {
          "type": "custom",
          "tokenizer": "standard",
          "filter": ["lowercase"]
        }
      }
    }
  },
  "mappings": {
    "dynamic": "strict",
    "properties": {
      "path":        { "type": "keyword", "normalizer": "lower_ascii" },
      "name":        { "type": "keyword", "normalizer": "lower_ascii" },
      "title":       { "type": "keyword", "normalizer": "lower_ascii" },
      "description": { "type": "keyword", "normalizer": "lower_ascii" },
      "summary":     { "type": "text",    "analyzer": "code_friendly" },
      "detailed":    { "type": "text",    "analyzer": "code_friendly" },
      "purpose":     { "type": "text",    "analyzer": "code_friendly" },
      "language":    { "type": "keyword", "normalizer": "lower_ascii" },
      "file_type":   { "type": "keyword", "normalizer": "lower_ascii" },
      "tags":        { "type": "keyword", "normalizer": "lower_ascii" },
      "key_points":  { "type": "keyword", "normalizer": "lower_ascii" },
      "hash":        { "type": "keyword", "normalizer": "lower_ascii" },
      "size":        { "type": "long" },
      "lines":       { "type": "integer" },
      "chunk_count": { "type": "integer" },
      "created_at":  { "type": "date" },
      "updated_at":  { "type": "date" },
      "extension":   { "type": "keyword", "normalizer": "lower_ascii" },
      "filename":    { "type": "keyword", "normalizer": "lower_ascii" },
      "mime":        { "type": "keyword", "normalizer": "lower_ascii" },
      "has_documentation": { "type": "boolean" },
      "layer":       { "type": "keyword", "normalizer": "lower_ascii" },
      "bm25_boost_terms": { "type": "keyword", "normalizer": "lower_ascii" },
      "likely_queries_file": { "type": "keyword", "normalizer": "lower_ascii" },
      "domain_objects": { "type": "keyword", "normalizer": "lower_ascii" },
      "complexity":  { "type": "double" },
      "confidence":  { "type": "double" },
      "change_count": { "type": "integer" },
      "delete_count": { "type": "integer" },
      "vulnerabilities": { "type": "text", "analyzer": "code_friendly" },
      "secrets_found": { "type": "keyword", "normalizer": "lower_ascii" },
      "table_columns": { "type": "keyword", "normalizer": "lower_ascii" },
      "improvements": { "type": "text", "analyzer": "code_friendly" },
      "potential_bugs": { "type": "text", "analyzer": "code_friendly" },
      "function_names": { "type": "keyword", "normalizer": "lower_ascii" },
      "class_names":    { "type": "keyword", "normalizer": "lower_ascii" },
      "variable_names": { "type": "keyword", "normalizer": "lower_ascii" },
      "notes":          { "type": "text", "analyzer": "code_friendly" },
      "conclusions":    { "type": "text", "analyzer": "code_friendly" },
      "open_questions": { "type": "text", "analyzer": "code_friendly" },
      "highlights":     { "type": "text", "analyzer": "code_friendly" },
      "anchors":        { "type": "keyword", "normalizer": "lower_ascii" }
    }
  }
}


