[LLM: читай полностью перед правкой, обновляй при изменении логики]

@docstring/_README.txt

НАЗВАНИЕ:
Elasticsearch Entrypoint — auto-init индексов при старте

SUMMARY:
Создает индексы rag и manifest асинхронно, затем запускает официальный entrypoint ES.

ВЫВОДЫ:
- create_indices запускается в фоне (&) — не блокирует старт ES.
- Retry loop 60 секунд ожидает готовность ES через curl localhost:9200.
- || true игнорирует ошибки curl (индекс уже существует) — идемпотентность.
- exec передает управление официальному docker-entrypoint.sh с сохранением PID для сигналов.

АНТИПАТТЕРНЫ:
- Запускать create_indices синхронно — блокирует старт ES.
- Не использовать exec — некорректная обработка SIGTERM при остановке контейнера.

ЗАМЕТКИ:
- Retry loop: 60 попыток с интервалом 1 секунда ожидает готовность ES.
- Создаются два индекса: rag (векторный + BM25) и manifest (хеши файлов).
- Конфигурация индексов: /init/index.json и /init/manifest.json.

