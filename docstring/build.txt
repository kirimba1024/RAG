[LLM: читай полностью перед правкой, обновляй при изменении логики]

@docstring/_README.txt

НАЗВАНИЕ:
Build Script — сборка и индексация кодовой базы

SUMMARY:
Скрипт для построения индексов Elasticsearch и Neo4j из кодовой базы в knowledge/.
Обрабатывает файлы, создает чанки, векторизует и сохраняет в ES, строит граф знаний.

ВЫВОДЫ:
- Обработка файлов: рекурсивный обход knowledge/ с фильтрацией по расширениям.
- Чанкирование: разбивка файлов на чанки с перекрытием для контекста.
- Векторизация: использование embed_model для создания embeddings.
- Elasticsearch: сохранение чанков с метаданными (file_path, start_line, end_line).
- Neo4j: построение графа сущностей и связей между ними.
- Прогресс: отображение статистики обработки файлов.

АНТИПАТТЕРНЫ:
- Обрабатывать бинарные файлы — только текстовые файлы кода.
- Пропускать обработку ошибок — может сломать весь процесс индексации.
- Не использовать перекрытие чанков — теряется контекст между частями файла.

ЗАМЕТКИ:
- Поддерживаемые форматы: .py, .java, .js, .ts, .jsx, .tsx, .md, .txt, .yml, .yaml, .json.
- Размер чанка: 1000 символов с перекрытием 200 символов.
- Метаданные: doc_id, chunk_id, chunk_total, start_line, end_line, file_path.
- Граф: entities (классы, функции, модули) и relationships (uses, extends, implements).